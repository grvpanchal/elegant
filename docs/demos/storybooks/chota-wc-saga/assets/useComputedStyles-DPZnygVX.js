var F=Object.defineProperty;var U=(s,t,e)=>t in s?F(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var o=(s,t,e)=>U(s,typeof t!="symbol"?t+"":t,e);import{D as q,e as G}from"./lit-element-CBvJUqC2.js";let _,M=0;function g(s){_=s}function x(){_=null,M=0}function J(){return M++}const E=Symbol("haunted.phase"),S=Symbol("haunted.hook"),k=Symbol("haunted.update"),P=Symbol("haunted.commit"),f=Symbol("haunted.effects"),p=Symbol("haunted.layoutEffects"),v="haunted.context";var L,O,R;R=S,O=f,L=p;class K{constructor(t,e){o(this,"update");o(this,"host");o(this,"virtual");o(this,R);o(this,O);o(this,L);this.update=t,this.host=e,this[S]=new Map,this[f]=[],this[p]=[]}run(t){g(this);let e=t();return x(),e}_runEffects(t){let e=this[t];g(this);for(let n of e)n.call(this);x()}runEffects(){this._runEffects(f)}runLayoutEffects(){this._runEffects(p)}teardown(){this[S].forEach(e=>{typeof e.teardown=="function"&&e.teardown()})}}const V=Promise.resolve().then.bind(Promise.resolve());function j(){let s=[],t;function e(){t=null;let n=s;s=[];for(var r=0,u=n.length;r<u;r++)n[r]()}return function(n){s.push(n),t==null&&(t=V(e))}}const W=j(),T=j();var A;A=E;class X{constructor(t,e){o(this,"renderer");o(this,"host");o(this,"state");o(this,A);o(this,"_updateQueued");this.renderer=t,this.host=e,this.state=new K(this.update.bind(this),e),this[E]=null,this._updateQueued=!1}update(){this._updateQueued||(W(()=>{let t=this.handlePhase(k);T(()=>{this.handlePhase(P,t),T(()=>{this.handlePhase(f)})}),this._updateQueued=!1}),this._updateQueued=!0)}handlePhase(t,e){switch(this[E]=t,t){case P:this.commit(e),this.runEffects(p);return;case k:return this.render();case f:return this.runEffects(f)}}render(){return this.state.run(()=>this.renderer.call(this.host,this.host))}runEffects(t){this.state._runEffects(t)}teardown(){this.state.teardown()}}const Y=(s="")=>s.replace(/-+([a-z])?/g,(t,e)=>e?e.toUpperCase():"");function Z(s){class t extends X{constructor(u,l,w){super(u,w||l);o(this,"frag");this.frag=l}commit(u){s(u,this.frag)}}function e(n,r,u){const l=(u||r||{}).baseElement||HTMLElement,{observedAttributes:w=[],useShadowDOM:D=!0,shadowRootInit:H={}}=u||r||{};class C extends l{constructor(){super();o(this,"_scheduler");D===!1?this._scheduler=new t(n,this):(this.attachShadow({mode:"open",...H}),this._scheduler=new t(n,this.shadowRoot,this))}static get observedAttributes(){return n.observedAttributes||w||[]}connectedCallback(){this._scheduler.update()}disconnectedCallback(){this._scheduler.teardown()}attributeChangedCallback(c,h,i){if(h===i)return;let I=i===""?!0:i;Reflect.set(this,Y(c),I)}}function z(d){let a=d,c=!1;return Object.freeze({enumerable:!0,configurable:!0,get(){return a},set(h){c&&a===h||(c=!0,a=h,this._scheduler&&this._scheduler.update())}})}const B=new Proxy(l.prototype,{getPrototypeOf(d){return d},set(d,a,c,h){let i;return a in d?(i=Object.getOwnPropertyDescriptor(d,a),i&&i.set?(i.set.call(h,c),!0):(Reflect.set(d,a,c,h),!0)):(typeof a=="symbol"||a[0]==="_"?i={enumerable:!0,configurable:!0,writable:!0,value:c}:i=z(c),Object.defineProperty(h,a,i),i.set&&i.set.call(h,c),!0)}});return Object.setPrototypeOf(C.prototype,B),C}return e}class b{constructor(t,e){o(this,"id");o(this,"state");this.id=t,this.state=e}}function $(s,...t){let e=J(),n=_[S],r=n.get(e);return r||(r=new s(e,_,...t),n.set(e,r)),r.update(...t)}function m(s){return $.bind(null,s)}function N(s){return m(class extends b{constructor(e,n,r,u){super(e,n);o(this,"callback");o(this,"lastValues");o(this,"values");o(this,"_teardown");s(n,this)}update(e,n){this.callback=e,this.values=n}call(){(!this.values||this.hasChanged())&&this.run(),this.lastValues=this.values}run(){this.teardown(),this._teardown=this.callback.call(this.state)}teardown(){typeof this._teardown=="function"&&this._teardown()}hasChanged(){return!this.lastValues||this.values.some((e,n)=>this.lastValues[n]!==e)}})}function Q(s,t){s[f].push(t)}const at=N(Q),tt=m(class extends b{constructor(t,e,n){super(t,e);o(this,"Context");o(this,"value");o(this,"_ranEffect");o(this,"_unsubscribe");this._updater=this._updater.bind(this),this._ranEffect=!1,this._unsubscribe=null,Q(e,this)}update(t){if(this.state.virtual)throw new Error("can't be used with virtual components");return this.Context!==t&&(this._subscribe(t),this.Context=t),this.value}call(){this._ranEffect||(this._ranEffect=!0,this._unsubscribe&&this._unsubscribe(),this._subscribe(this.Context),this.state.update())}_updater(t){this.value=t,this.state.update()}_subscribe(t){const e={Context:t,callback:this._updater};this.state.host.dispatchEvent(new CustomEvent(v,{detail:e,bubbles:!0,cancelable:!0,composed:!0}));const{unsubscribe:n=null,value:r}=e;this.value=n?r:t.defaultValue,this._unsubscribe=n}teardown(){this._unsubscribe&&this._unsubscribe()}});function et(s){return t=>{const e={Provider:class extends HTMLElement{constructor(){super();o(this,"listeners");o(this,"_value");this.listeners=new Set,this.addEventListener(v,this)}disconnectedCallback(){this.removeEventListener(v,this)}handleEvent(r){const{detail:u}=r;u.Context===e&&(u.value=this.value,u.unsubscribe=this.unsubscribe.bind(this,u.callback),this.listeners.add(u.callback),r.stopPropagation())}unsubscribe(r){this.listeners.delete(r)}set value(r){this._value=r;for(let u of this.listeners)u(r)}get value(){return this._value}},Consumer:s(function({render:n}){const r=tt(e);return n(r)}),defaultValue:t};return e}}m(class extends b{constructor(t,e,n,r){super(t,e);o(this,"value");o(this,"values");this.value=n(),this.values=r}update(t,e){return this.hasChanged(e)&&(this.values=e,this.value=t()),this.value}hasChanged(t=[]){return t.some((e,n)=>this.values[n]!==e)}});function st(s,t){s[p].push(t)}const nt=N(st),ct=m(class extends b{constructor(t,e,n){super(t,e);o(this,"args");this.updater=this.updater.bind(this),typeof n=="function"&&(n=n()),this.makeArgs(n)}update(){return this.args}updater(t){if(typeof t=="function"){const e=t,[n]=this.args;t=e(n)}this.makeArgs(t),this.state.update()}makeArgs(t){this.args=Object.freeze([t,this.updater])}});/**
 * @license
 * Portions Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */Promise.resolve();m(class extends b{constructor(t,e,n,r,u){super(t,e);o(this,"reducer");o(this,"currentState");this.dispatch=this.dispatch.bind(this),this.currentState=u!==void 0?u(r):r}update(t){return this.reducer=t,[this.currentState,this.dispatch]}dispatch(t){this.currentState=this.reducer(this.currentState,t),this.state.update()}});function rt({render:s}){const t=Z(s),e=et(t);return{component:t,createContext:e}}const{component:ht,createContext:lt}=rt({render:q});/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var y;((y=window.HTMLSlotElement)===null||y===void 0?void 0:y.prototype.assignedElements)!=null;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */console.warn("The main 'lit-element' module entrypoint is deprecated. Please update your imports to use the 'lit' package: 'lit' and 'lit/decorators.ts' or import from 'lit-element/lit-element.ts'. See https://lit.dev/msg/deprecated-import-path for more information.");function ot(s,t,e){const n=r=>{t.length!==0&&(window.ShadyCSS!==void 0&&!window.ShadyCSS.nativeShadow?window.ShadyCSS.ScopingShim.prepareAdoptedCssText(t.map(u=>u.cssText),r.localName):G?(r.shadowRoot.adoptedStyleSheets=t.map(u=>u instanceof CSSStyleSheet?u:u.styleSheet),e&&(r.shadowRoot.adoptedStyleSheets=[...r.shadowRoot.adoptedStyleSheets,...document.adoptedStyleSheets])):t.forEach(u=>{const l=document.createElement("style");l.textContent=u.cssText,r.shadowRoot.appendChild(l)}))};nt(()=>{n(s)},[t])}function dt(s,t,e=!0){ot(s,t,e)}export{ct as a,at as b,ht as c,dt as u};
